<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>pra sfy üíñ</title>
  <style>
    :root{
      --bg0:#05040a;
      --bg1:#070612;
      --bg2:#0b0718;
      --border: rgba(255,255,255,.10);
      --border2: rgba(255,255,255,.14);
      --text: #f4efff;
      --muted: rgba(244,239,255,.70);

      --pink:#ff3d9a;
      --pink2:#ff85c6;
      --violet:#8b5cf6;
      --cyan:#57e0ff;

      --shadow: 0 18px 70px rgba(0,0,0,.55);
      --r: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(900px 700px at 15% 15%, rgba(255,61,154,.14), transparent 60%),
        radial-gradient(900px 700px at 85% 25%, rgba(139,92,246,.12), transparent 58%),
        radial-gradient(900px 700px at 55% 90%, rgba(87,224,255,.08), transparent 62%),
        linear-gradient(180deg, var(--bg0), var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .grain{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.12;
      mix-blend-mode: overlay;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='420' height='420'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='420' height='420' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      background-size: 420px 420px;
    }

    .wrap{
      width:min(980px, 92vw);
      margin:0 auto;
      padding: 28px 0 80px;
      display:grid;
      gap: 14px;
    }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      padding-bottom: 4px;
    }

    .title{
      margin:0;
      font-size: clamp(24px, 3.2vw, 42px);
      line-height: 1.06;
      letter-spacing:.2px;
    }
    .sub{
      margin: 10px 0 0;
      color: var(--muted);
      line-height: 1.55;
      font-size: 15px;
      max-width: 68ch;
    }

    .pill{
      display:flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      backdrop-filter: blur(12px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      user-select:none;
      font-weight: 900;
      color: rgba(244,239,255,.85);
      white-space:nowrap;
      height: fit-content;
    }
    .dots{ display:flex; gap:6px; }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.12);
    }
    .dot.on{
      background: linear-gradient(180deg, var(--pink2), var(--pink));
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 0 18px rgba(255,61,154,.25);
    }

    .card{
      border-radius: var(--r);
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-30%;
      background:
        radial-gradient(closest-side at 25% 20%, rgba(255,61,154,.12), transparent 62%),
        radial-gradient(closest-side at 90% 35%, rgba(139,92,246,.10), transparent 62%),
        radial-gradient(closest-side at 65% 95%, rgba(87,224,255,.06), transparent 60%);
      opacity:.75;
      pointer-events:none;
    }

    .section{
      position:relative;
      z-index:1;
      padding: 16px 16px 12px;
    }
    .section h2{
      margin:0 0 8px;
      font-size: 20px;
      letter-spacing:.2px;
    }
    .section p{
      margin:0;
      color: var(--muted);
      line-height: 1.6;
    }

    .mini{
      position:relative;
      z-index:1;
      padding: 0 16px 16px;
      display:grid;
      gap: 12px;
    }

    .hint{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      padding: 12px 12px;
      border-radius: 16px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(244,239,255,.78);
      line-height: 1.45;
    }
    .hint .tag{
      flex: 0 0 auto;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 900;
      background: rgba(255,61,154,.14);
      border: 1px solid rgba(255,61,154,.20);
      color: rgba(244,239,255,.92);
    }

    .scratch-grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
    }
    @media (max-width: 740px){
      .scratch-grid{ grid-template-columns: 1fr; }
    }

    .scratch{
      position:relative;
      border-radius: 18px;
      border: 1px solid var(--border2);
      background: rgba(0,0,0,.22);
      overflow:hidden;
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
      aspect-ratio: 9/16;
      max-height: 74vh;
      user-select:none;
      transform: translateZ(0);
    }

    .photo{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      pointer-events:none;
      filter: saturate(1.05) contrast(1.03);
    }

    canvas.scratchCanvas{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      z-index:2;
      touch-action:none;
      cursor: crosshair;
    }

    .line{
      display:none;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      color: rgba(244,239,255,.88);
      line-height: 1.55;
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    .line.show{
      display:block;
      animation: pop .25s ease-out;
    }
    @keyframes pop{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }
    .line b{ color: rgba(255,133,198,.98); }

    .paper{
      display:none;
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(900px 420px at 15% 0%, rgba(255,61,154,.14), transparent 55%),
        radial-gradient(900px 420px at 95% 10%, rgba(139,92,246,.10), transparent 55%),
        rgba(0,0,0,.26);
      padding: 18px 16px;
      line-height: 1.75;
      color: rgba(244,239,255,.92);
      box-shadow: 0 18px 70px rgba(0,0,0,.40);
      position:relative;
      overflow:hidden;
    }
    .paper.show{ display:block; animation: pop .28s ease-out; }
    .paper h3{
      margin:0 0 10px;
      font-size: 18px;
      letter-spacing:.2px;
    }
    .paper p{ margin: 0 0 12px; }
    .sign{
      margin-top: 10px;
      font-weight: 900;
      color: rgba(244,239,255,.88);
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    button{
      border:0;
      cursor:pointer;
      color: var(--text);
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 900;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 14px 44px rgba(0,0,0,.35);
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
    }
    button:hover{ filter: brightness(1.06); }
    button:active{ transform: translateY(2px) scale(.99); }

    button.primary{
      background: linear-gradient(180deg, rgba(255,133,198,.95), rgba(255,61,154,.85));
      border: 1px solid rgba(255,255,255,.26);
      color:#140813;
    }

    canvas#confetti{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 60;
      display:none;
    }

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      min-width: min(520px, 92vw);
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.44);
      backdrop-filter: blur(14px);
      box-shadow: 0 18px 70px rgba(0,0,0,.45);
      opacity:0;
      pointer-events:none;
      transition: opacity .16s ease, transform .16s ease;
      z-index: 70;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-6px); }
    .toast .ic{
      width: 28px; height: 28px;
      border-radius: 10px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      flex: 0 0 auto;
    }
    .toast .tx{
      color: rgba(244,239,255,.88);
      line-height: 1.35;
    }
  </style>
</head>

<body>
  <div class="grain" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div>
        <h1 class="title">sfy‚Ä¶ eu fiz isso pra voc√™ üíñ</h1>
        <p class="sub">
          T√° tudo simples e direto. S√≥ uma brincadeira pra eu te falar uma coisa do meu jeito.
          E sim‚Ä¶ eu fiquei olhando suas fotos tempo demais.
        </p>
      </div>

      <div class="pill" title="progresso">
        <div class="dots">
          <div class="dot" id="d1"></div>
          <div class="dot" id="d2"></div>
          <div class="dot" id="d3"></div>
        </div>
        <span id="prog">0/2</span>
      </div>
    </header>

    <section class="card" id="raspa">
      <div class="section">
        <h2>Raspadinha</h2>
        <p>R√°pido: clica e passa por cima. Quando chegar na metade, j√° abre tudo.</p>
      </div>

      <div class="mini">
        <div class="hint">
          <span class="tag">r√°pido</span>
          <span>Clica e passa por cima rapidinho üòå</span>
        </div>

        <div class="scratch-grid">
          <div class="scratch" data-id="1">
            <img class="photo" src="./sfy_1.png" alt="sfy 1">
            <canvas class="scratchCanvas"></canvas>
          </div>

          <div class="scratch" data-id="2">
            <img class="photo" src="./sfy_2.png" alt="sfy 2">
            <canvas class="scratchCanvas"></canvas>
          </div>
        </div>

        <div class="line" id="line1"></div>
        <div class="line" id="line2"></div>

        <div class="paper" id="paper">
          <h3>Agora eu vou falar s√©rio.</h3>

          <p>
            sfy, eu n√£o vou fingir que isso aqui √© s√≥ ‚Äúbrincadeira‚Äù.
            Eu fiz porque eu gosto de falar contigo e eu gosto do jeito que voc√™ me prende aten√ß√£o.
          </p>

          <p>
            Mesmo sendo virtual por enquanto, eu sinto uma coisa bem real:
            eu quero continuar. Quero estar por perto, te conhecer de verdade, sem pressa e sem for√ßar nada.
          </p>

          <p>
            Eu gosto de voc√™. Do seu jeito. Da sua vibe.
            E eu t√¥ sendo sincero: tem dias que eu abro o celular e eu espero que seja voc√™.
          </p>

          <p>
            Eu n√£o t√¥ aqui pra fazer promessa gigante.
            Eu s√≥ quero que voc√™ saiba que eu tenho inten√ß√£o, tenho carinho,
            e eu tenho vontade de fazer isso ficar bonito ‚Äî do nosso jeito.
          </p>

          <p style="margin-bottom:0">
            Se voc√™ quiser, a gente vai com calma‚Ä¶ mas vai.
          </p>

          <div class="sign">‚Äî eu üíò</div>

          <div class="actions" style="margin-top:14px">
            <button class="primary" id="conf">confete</button>
            <button id="again">ver de novo</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">
    <div class="ic" id="tic">‚ú®</div>
    <div class="tx" id="ttx"></div>
  </div>

  <canvas id="confetti"></canvas>

  <script>
    const $ = s => document.querySelector(s);

    const prog = { done1:false, done2:false };
    const d1 = $("#d1"), d2 = $("#d2"), d3 = $("#d3"), progText = $("#prog");

    function updateProg(){
      const n = (prog.done1?1:0) + (prog.done2?1:0);
      progText.textContent = `${n}/2`;
      d1.classList.toggle("on", prog.done1);
      d2.classList.toggle("on", prog.done2);
      d3.classList.toggle("on", n === 2);
      if(n === 2){
        $("#paper").classList.add("show");
      }
    }

    const toastEl = $("#toast"), tic = $("#tic"), ttx = $("#ttx");
    function toast(msg, icon="‚ú®"){
      tic.textContent = icon;
      ttx.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toast._t);
      toast._t = setTimeout(()=>toastEl.classList.remove("show"), 1700);
    }

    const cnv = $("#confetti");
    const ctx = cnv.getContext("2d");
    let parts = [];
    let on = false;

    function resizeC(){
      cnv.width = innerWidth * devicePixelRatio;
      cnv.height = innerHeight * devicePixelRatio;
      cnv.style.width = innerWidth + "px";
      cnv.style.height = innerHeight + "px";
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    addEventListener("resize", resizeC, {passive:true});

    function burst(x, y){
      resizeC();
      cnv.style.display = "block";
      on = true;
      parts = [];
      const N = 120;
      for(let i=0;i<N;i++){
        const a = Math.random() * Math.PI * 2;
        const sp = 2.2 + Math.random() * 3.8;
        parts.push({
          x, y,
          vx: Math.cos(a) * sp,
          vy: Math.sin(a) * sp - (1.2 + Math.random()*1.4),
          r: 3 + Math.random()*3,
          rot: Math.random()*Math.PI*2,
          vr: -0.18 + Math.random()*0.36,
          t: 0,
          life: 170 + (Math.random()*80|0)
        });
      }
      requestAnimationFrame(tick);
      setTimeout(()=>stopConf(), 1400);
    }

    function stopConf(){
      on = false;
      setTimeout(()=>{
        cnv.style.display = "none";
        ctx.clearRect(0,0,cnv.width, cnv.height);
      }, 180);
    }

    function tick(){
      if(!on) return;
      ctx.clearRect(0,0,innerWidth, innerHeight);

      for(const p of parts){
        p.t++;
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.06;
        p.rot += p.vr;

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.globalAlpha = Math.max(0, 1 - p.t/p.life);

        const pick = p.t % 4;
        ctx.fillStyle =
          pick===0 ? "rgba(255,133,198,.95)" :
          pick===1 ? "rgba(255,61,154,.92)" :
          pick===2 ? "rgba(139,92,246,.85)" :
                     "rgba(87,224,255,.75)";
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*2.2);
        ctx.restore();
      }

      parts = parts.filter(p => p.t < p.life && p.y < innerHeight + 80);
      if(parts.length === 0) stopConf();
      requestAnimationFrame(tick);
    }

    $("#conf").addEventListener("click", ()=>{
      burst(innerWidth*0.5, innerHeight*0.25);
      toast("ok‚Ä¶ eu fiquei bobo.", "üíñ");
    });

    $("#again").addEventListener("click", ()=>location.reload());

    function setupScratch(el){
      const canvas = el.querySelector("canvas");
      const ctx2 = canvas.getContext("2d");

      let w=0, h=0;
      let drawing = false;
      let done = false;

      function resize(){
        const r = el.getBoundingClientRect();
        w = Math.max(1, Math.floor(r.width));
        h = Math.max(1, Math.floor(r.height));
        canvas.width = w;
        canvas.height = h;

        ctx2.globalCompositeOperation = "source-over";
        const g = ctx2.createLinearGradient(0,0,w,h);
        g.addColorStop(0, "rgba(20,18,30,0.96)");
        g.addColorStop(1, "rgba(8,7,14,0.94)");
        ctx2.fillStyle = g;
        ctx2.fillRect(0,0,w,h);
      }

      function scratch(x,y){
        if(done) return;
        ctx2.globalCompositeOperation = "destination-out";
        ctx2.beginPath();
        ctx2.arc(x,y, 48, 0, Math.PI*2);
        ctx2.fill();
      }

      function revealAll(){
        done = true;
        ctx2.clearRect(0,0,w,h);
        canvas.style.pointerEvents = "none";
      }

      function calc(){
        if(done) return false;
        const img = ctx2.getImageData(0,0,w,h).data;
        let transparent = 0;
        for(let i=3;i<img.length;i+=4){
          if(img[i] === 0) transparent++;
        }
        const pct = (transparent/(w*h))*100;
        if(pct >= 50){
          revealAll();
          return true;
        }
        return false;
      }

      function pos(e){
        const r = canvas.getBoundingClientRect();
        return { x: e.clientX - r.left, y: e.clientY - r.top };
      }

      function onComplete(){
        const id = el.dataset.id;
        const r = el.getBoundingClientRect();
        burst(r.left + r.width/2, r.top + r.height/2);

        if(id === "1"){
          prog.done1 = true;
          const line1 = $("#line1");
          line1.innerHTML = `eu tentei agir normal‚Ä¶ mas <b>voc√™ √© bonita demais</b> pra eu fingir.`;
          line1.classList.add("show");
          toast("‚Ä¶t√°.", "üíò");
        }else{
          prog.done2 = true;
          const line2 = $("#line2");
          line2.innerHTML = `se eu te chamar de <b>linda</b> de novo, n√£o √© repeti√ß√£o‚Ä¶ √© insist√™ncia mesmo.`;
          line2.classList.add("show");
          toast("pronto.", "üíñ");
        }

        updateProg();
      }

      canvas.addEventListener("pointerdown", (e)=>{
        if(done) return;
        drawing = true;
        canvas.setPointerCapture(e.pointerId);
        const p = pos(e);
        scratch(p.x, p.y);
        if(calc()) onComplete();
      });

      canvas.addEventListener("pointermove", (e)=>{
        if(!drawing || done) return;
        const p = pos(e);
        scratch(p.x, p.y);
        if(calc()) onComplete();
      });

      canvas.addEventListener("pointerup", ()=>{
        drawing = false;
      });

      window.addEventListener("resize", resize, {passive:true});
      resize();
    }

    document.querySelectorAll(".scratch").forEach(setupScratch);
    updateProg();
  </script>
</body>
</html>